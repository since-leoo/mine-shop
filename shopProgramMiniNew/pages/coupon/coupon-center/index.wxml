<view class="coupon-center">
  <view wx:if="{{loading}}" class="loading-wrap">
    <t-loading theme="circular" size="40rpx" text="加载中..." />
  </view>

  <view wx:elif="{{couponList.length === 0}}" class="empty-wrap">
    <t-icon name="coupon" size="120rpx" color="#ccc" />
    <text class="empty-text">暂无可领取的优惠券</text>
  </view>

  <view wx:else class="coupon-list">
    <view
      class="coupon-item"
      wx:for="{{couponList}}"
      wx:key="id"
    >
      <ui-coupon-card
        title="{{item.title}}"
        type="{{item.type}}"
        value="{{item.value}}"
        tag="{{item.tag}}"
        desc="{{item.desc}}"
        currency="{{item.currency}}"
        timeLimit="{{item.timeLimit}}"
        status="{{item.status}}"
      >
        <view slot="operator">
          <t-button
            wx:if="{{item.isReceivable}}"
            theme="primary"
            variant="outline"
            shape="round"
            size="extra-small"
            data-id="{{item.id}}"
            data-index="{{index}}"
            bind:tap="onReceive"
          >领取</t-button>
          <t-button
            wx:else
            theme="default"
            variant="outline"
            shape="round"
            size="extra-small"
            disabled
          >已领取</t-button>
        </view>
      </ui-coupon-card>
    </view>
  </view>

  <t-toast id="t-toast" />
</view>
