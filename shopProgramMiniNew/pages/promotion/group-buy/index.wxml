<!-- 顶部 Banner -->
<view class="banner">
  <view class="banner__bg"></view>
  <view class="banner__content">
    <view class="banner__title-row">
      <text class="banner__title">拼团特惠</text>
      <text class="banner__sub">好物拼着买 更划算</text>
    </view>
    <view class="banner__countdown" wx:if="{{countdown}}">
      <text class="banner__cd-label">距结束</text>
      <text class="banner__cd-block">{{countdown.h}}</text>
      <text class="banner__cd-sep">:</text>
      <text class="banner__cd-block">{{countdown.m}}</text>
      <text class="banner__cd-sep">:</text>
      <text class="banner__cd-block">{{countdown.s}}</text>
    </view>
  </view>
  <view class="banner__deco"></view>
</view>

<!-- 加载中 -->
<view wx:if="{{loading}}" class="loading-wrap">
  <t-loading theme="circular" size="40rpx" text="加载中..." inherit-color />
</view>

<!-- 空状态 -->
<view wx:elif="{{list.length === 0}}" class="empty-wrap">
  <t-icon name="shop" size="120rpx" color="#ccc" />
  <text class="empty-text">暂无拼团活动</text>
</view>

<!-- 商品列表 -->
<view wx:else class="product-list">
  <view
    class="product-card"
    wx:for="{{list}}"
    wx:key="spuId"
    data-spu-id="{{item.spuId}}"
    data-activity-id="{{item.activityId}}"
    bind:tap="onItemTap"
  >
    <view class="product-card__img-wrap">
      <t-image
        t-class="product-card__img"
        src="{{item.thumb}}"
        mode="aspectFill"
      />
      <view class="product-card__badge" wx:if="{{item.tags[0].title}}">
        {{item.tags[0].title}}
      </view>
    </view>
    <view class="product-card__info">
      <text class="product-card__title">{{item.title}}</text>
      <view class="product-card__price-row">
        <view class="product-card__group-price">
          <text class="price-label">拼团价</text>
          <text class="price-value">¥{{item.price / 100}}</text>
        </view>
        <text class="product-card__origin-price" wx:if="{{item.originPrice}}">¥{{item.originPrice / 100}}</text>
      </view>
      <view class="product-card__action">
        <text class="product-card__btn">去拼团</text>
      </view>
    </view>
  </view>
</view>

<t-toast id="t-toast" />
